<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>MVP Helpers</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.indigo-pink.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <link rel="stylesheet" type="text/css" href="stylesheets/styles.css">
    <style>
        pre {
            display: block;
            padding: 10px;
            overflow: auto;
        }
    </style>
</head>
<body>
<div class="demo-layout mdl-layout mdl-layout--fixed-header mdl-js-layout mdl-color--grey-100">
    <header class="demo-header mdl-layout__header mdl-layout__header--scroll mdl-color-text--white">
        <div class="mdl-layout__header-row">
            <span class="mdl-layout-title">MVP Helpers</span>
            <div class="mdl-layout-spacer"></div>
            <a class="mdl-button mdl-js-button mdl-button--icon" href="https://github.com/BlackBoxVision/mvp-helpers/" target="_blank">
                <i class="fa fa-github" aria-hidden="true"></i>
            </a>
        </div>
    </header>
    <div class="demo-ribbon"></div>
    <main class="demo-main mdl-layout__content">
        <div class="demo-container mdl-grid">
            <div class="mdl-cell mdl-cell--1-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
            <div class="demo-content mdl-color--white mdl-shadow--4dp content mdl-color-text--grey-800 mdl-cell mdl-cell--10-col">
                <div class="demo-crumbs mdl-color-text--grey-500">
                    Helper classes to build Android Apps through MVP pattern in a faster way
                </div>
                <h4>Intro</h4>
                <p>
                    After working about 3 years with Android development, I learn a lot from the different projects I have made, a lot of mistakes, and a lot of lessons learned. About 1 year ago, or more, in Android, MVP become the selected pattern to make Android Apps. MVP makes your apps code more easier to follow, and also easier to reason.
                </p>
                <p>
                    This library, exposes a minimal API that I have abstracted during many projects. The classes that contain this library help me to speed app development, also, they clean my code a lot.
                </p>
                <p>
                    Check the following instructions under this README in order to get a project up and running with this simpler library.
                </p>
                <h4>Installation</h4>
                <p>Actually I don't have this library in <strong>JCenter/Maven Central</strong>, so if you want to use, follow this instructions to get everything work: </p>

                <p><strong>Gradle</strong></p>

                <ul>
                    <li>Add it in your root build.gradle at the end of repositories:</li>
                </ul>

                <div class="highlight highlight-source-groovy-gradle mdl-color--grey-50"><pre><span class="pl-en">allprojects</span> {
    repositories {
        <span class="pl-k">..</span>.
        maven { url <span class="pl-s"><span class="pl-pds">"</span>https://jitpack.io<span class="pl-pds">"</span></span> }
    }
}</pre></div>

                <ul>
                    <li>Add the dependency:</li>
                </ul>

                <div class="highlight highlight-source-groovy-gradle mdl-color--grey-50"><pre><span class="pl-en">dependencies</span> {
     compile <span class="pl-s"><span class="pl-pds">'</span>com.github.BlackBoxVision:mvp-helpers:v0.1.0<span class="pl-pds">'</span></span>
}</pre></div>

                <p><strong>Maven</strong></p>

                <ul>
                    <li>Add this line to repositories section in pom.xml:</li>
                </ul>

                <div class="highlight highlight-text-xml mdl-color--grey-50"><pre>&lt;<span class="pl-ent">repositories</span>&gt;
    &lt;<span class="pl-ent">repository</span>&gt;
       &lt;<span class="pl-ent">id</span>&gt;jitpack.io&lt;/<span class="pl-ent">id</span>&gt;
         &lt;<span class="pl-ent">url</span>&gt;https://jitpack.io&lt;/<span class="pl-ent">url</span>&gt;
    &lt;/<span class="pl-ent">repository</span>&gt;
&lt;/<span class="pl-ent">repositories</span>&gt;</pre></div>

                <ul>
                    <li>Add the dependency:</li>
                </ul>

                <div class="highlight highlight-text-xml mdl-color--grey-50"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;com.github.BlackBoxVision&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;mvp-helpers&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;v0.1.0&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

                <p><strong>SBT</strong></p>

                <ul>
                    <li>Add it in your build.sbt at the end of resolvers:</li>
                </ul>

                <div class="highlight highlight-source-scala mdl-color--grey-50"><pre>  resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>jitpack<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>https://jitpack.io<span class="pl-pds">"</span></span></pre></div>

                <ul>
                    <li>Add the dependency:</li>
                </ul>

                <div class="highlight highlight-source-scala mdl-color--grey-50"><pre>  libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.BlackBoxVision<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>mvp-helpers<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>v0.1.0<span class="pl-pds">"</span></span> </pre></div>

                <h4>Usage Example</h4>
                <p>The usage is really simple, the concepts behind this library are the following ones: </p>

                <ul>
                    <li>
                        <strong>View</strong> ‚Üí The <strong>View</strong> is an interface that contains methods related to UI interaction, to create you own you should extends the <strong>BaseView</strong> like in the following example: </li>
                </ul>

                <div class="highlight highlight-source-java mdl-color--grey-50"><pre><span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">DetailsView</span> <span class="pl-k">extends</span> <span class="pl-e">BaseView</span> {

  <span class="pl-k">void</span> <span class="pl-en">onInfoReceived</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">Bundle</span> <span class="pl-v">information</span>);

  <span class="pl-k">void</span> <span class="pl-en">onInfoError</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">String</span> <span class="pl-v">errorMessage</span>);
}</pre></div>

                <ul>
                    <li>
                        <strong>Interactor</strong> ‚Üí The <strong>Interactor</strong> is the class that do the hard work, all the blocking operations like <strong>I/O, Networking, Database</strong> Intectations should be done here. </li>
                </ul>

                <p>When you extend the <strong>BaseInteractor</strong> class, you get two useful methods <strong>runOnBackground</strong> and <strong>runOnUiThread</strong>. Both methods receives a <strong>Runnable</strong> as param. </p>

                <ul>
                    <li><p><strong>runOnBackground</strong> is a method that executes the runnable you pass to it in an <strong>Executor</strong>. The executor is an instance generated by <strong>Executors</strong> class, it provides you with a fixed thread pool executor of 5 theads. Enough to do hard work. </p></li>
                    <li><p><strong>runOnUiThread</strong> is a method that executes the runnable you pass to it in an <strong>Handler</strong>. The handler instance is generated with a reference to the <strong>Main Looper</strong>. In this way, we know that we really comunicate to the correct thread the updates to post, in our case, the UI one. </p></li>
                </ul>

                <p>Check the following example: </p>

                <div class="highlight highlight-source-java mdl-color--grey-50"><pre><span class="pl-c">//This example uses Java 8 features, I assume the usage of retrolambda</span>
<span class="pl-k">public</span> <span class="pl-k">final</span> <span class="pl-k">class</span> <span class="pl-en">DetailsInteractor</span> <span class="pl-k">extends</span> <span class="pl-e">BaseInteractor</span> {

  <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">retrieveDetailsFromService</span>(<span class="pl-k">@NonNull</span> <span class="pl-k">final</span> <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">@NonNull</span> <span class="pl-k">final</span> <span class="pl-k">OnSuccessListener&lt;<span class="pl-smi">Bundle</span>&gt;</span> <span class="pl-v">successListener</span>, <span class="pl-k">@NonNull</span> <span class="pl-k">final</span> <span class="pl-k">OnErrorListener&lt;<span class="pl-smi">String</span>&gt;</span> <span class="pl-v">errorListener</span>) {
    runOnBackground(() <span class="pl-k">-</span><span class="pl-k">&gt;</span> {
      <span class="pl-c">//Getting data from somewhere</span>
      <span class="pl-smi">Bundle</span> data <span class="pl-k">=</span> <span class="pl-c1">...</span> ;

      <span class="pl-k">if</span> (data <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {
        runOnUiThread(() <span class="pl-k">-</span><span class="pl-k">&gt;</span> successListener<span class="pl-k">.</span>onSuccess(data));
      } <span class="pl-k">else</span> {
        runOnUiThread(() <span class="pl-k">-</span><span class="pl-k">&gt;</span> errorListener<span class="pl-k">.</span>onError(<span class="pl-s"><span class="pl-pds">"</span>Ups, something went wrong<span class="pl-pds">"</span></span>));
      }
    })
  }
}</pre></div>

                <ul>
                    <li>
                        <strong>Presenter</strong> ‚Üí The <strong>presenter</strong> acts as a middle man between the <strong>Interactor</strong> and the <strong>View</strong>. When you request something to the presenter, he contacts the interactor object to get what he needs, and then he interacts with the view to make you get what you really need. Continue with the example of a Details: </li>
                </ul>

                <div class="highlight highlight-source-java mdl-color--grey-50"><pre><span class="pl-c">//I use method references from Java 8 to point the callbacks to interactor, I assume a working project with Retrolambda</span>
<span class="pl-k">public</span> <span class="pl-k">final</span> <span class="pl-k">class</span> <span class="pl-en">DetailsPresenter</span> <span class="pl-k">extends</span> <span class="pl-e">BasePresenter&lt;<span class="pl-smi">DetailsView</span>&gt;</span> {
  <span class="pl-k">private</span> <span class="pl-smi">DetailsInteractor</span> interactor;

  <span class="pl-k">public</span> <span class="pl-en">DetailsPresenter</span>() {
    interactor <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">DetailsInteractor</span>();
  }

  <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">getInformationFromId</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">String</span> <span class="pl-v">id</span>) {
    <span class="pl-k">if</span> (isViewAttached()) {
      interactor<span class="pl-k">.</span>retrieveDetailsFromService(id, <span class="pl-v">this</span><span class="pl-k">::</span>onSuccess, <span class="pl-v">this</span><span class="pl-k">::</span>onError);
    }
  }

  <span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">onSuccess</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">Bundle</span> <span class="pl-v">data</span>) {
    <span class="pl-k">if</span> (isViewAttached()) {
      getView()<span class="pl-k">.</span>onInfoReceived(data);
    }
  }

  <span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">onError</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">String</span> <span class="pl-v">errorMessage</span>) {
    <span class="pl-k">if</span> (isViewAttached()) {
      getView()<span class="pl-k">.</span>onInfoError(errorMessage);
    }
  }
}</pre></div>

                <p>As you see, <strong>BasePresenter</strong> is a generic class, you have to pass to it the <strong>View</strong> that you want to use when you inherit from it. <strong>BasePresenter</strong> provides you with a set of methods to deal with <strong>view</strong> interfaces, that are the following ones: </p>

                <ul>
                    <li><p><strong>isViewAttached</strong> ‚Üí This method checks if you have set the view to the presenter, returns to you a boolean value that you should handle in your presenter implementation. </p></li>
                    <li><p><strong>detachView</strong> ‚Üí This method dereference the view, setting it to null. This method should be called in the onDestroy method in case of use in Activity, and onDestroyView in case of Fragment usage. </p></li>
                    <li><p><strong>attachView</strong> ‚Üí This method adds the view to the presenter, so you can start to handle the cicle of view - presenter - interactor interaction.</p></li>
                    <li><p><strong>getView</strong> ‚Üí simple getter, to make your access to the view defined more cleaner.</p></li>
                </ul>

                <h4>Complement with Android</h4>
                <p>Well, that's the basics behind the library. At this point, you are asking yourself, how do I connect this classes with a Android??. Well, that's pretty simple! </p>

                <p>I work a lot with <strong>Fragments</strong>, they simplify a lot my work flow. I think in them as the <strong>View</strong> in Android. I let Activity manage Fragments, don't want to charge them, since they have a lot of responsabilities. </p>

                <p>To finalize the explanation, check the sample implementation: </p>

                <div class="highlight highlight-source-java mdl-color--grey-50"><pre><span class="pl-k">public</span> <span class="pl-k">final</span> <span class="pl-k">class</span> <span class="pl-en">DetailsFragment</span> <span class="pl-k">extends</span> <span class="pl-e">BaseFragment&lt;<span class="pl-smi">DetailsPresenter</span>&gt;</span> <span class="pl-k">implements</span> <span class="pl-e">DetailsView</span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-en">addPresenter</span>() {
      <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">DetailsPresenter</span>();
    }

    <span class="pl-k">@LayoutRes</span>
    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">getLayout</span>() {
      <span class="pl-k">return</span> <span class="pl-smi">R</span><span class="pl-k">.</span>layout<span class="pl-k">.</span>fragment_details;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">void</span> <span class="pl-en">onPresenterCreated</span><span class="pl-k">(</span><span class="pl-k">@NonNull</span> <span class="pl-smi">DetailsPresenter</span> <span class="pl-v">presenter</span><span class="pl-k">)</span> <span class="pl-k">{</span>
        presenter<span class="pl-k">.</span>attachView<span class="pl-k">(</span><span class="pl-k">this</span><span class="pl-k">)</span><span class="pl-k">;</span>
    <span class="pl-k">}</span>

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onActivityCreated</span>(<span class="pl-k">@Nullable</span> <span class="pl-smi">Bundle</span> <span class="pl-v">savedInstanceState</span>) {
        <span class="pl-v">super</span><span class="pl-k">.</span>onActivityCreated(savedInstanceState);
        getPresenter()<span class="pl-k">.</span>getInformationFromId(<span class="pl-s"><span class="pl-pds">"</span>ssdWRGD132<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">void</span> <span class="pl-en">onInfoReceived</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">Bundle</span> <span class="pl-v">information</span>) {
       <span class="pl-smi">Toast</span><span class="pl-k">.</span>makeText(getContext(), information<span class="pl-k">.</span>toString(), <span class="pl-smi">Toast</span><span class="pl-c1"><span class="pl-k">.</span>LENGTH_SHORT</span>)<span class="pl-k">.</span>show();
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">void</span> <span class="pl-en">onInfoError</span>(<span class="pl-k">@NonNull</span> <span class="pl-smi">String</span> <span class="pl-v">errorMessage</span>) {
       <span class="pl-smi">Toast</span><span class="pl-k">.</span>makeText(getContext(), errorMessage, <span class="pl-smi">Toast</span><span class="pl-c1"><span class="pl-k">.</span>LENGTH_SHORT</span>)<span class="pl-k">.</span>show();
    }
} </pre></div>

                <p>As you see, this Fragment is a <strong>generic</strong> class that solves some troubles for you, <strong>It has the ability to detach view for you in onDestroyView so you don't have to, auto inject views with butter knife, and lifecycle methods simplified</strong>. </p>

                <p>When you inherit it, you will get the following methods to implement:</p>

                <ul>
                    <li><p><strong>addPresenter</strong> ‚Üí in this method you have to create you instance of Presenter. </p></li>
                    <li><p><strong>getLayout</strong> ‚Üí in this method you have pass the id reference to the layout. This library comes with <strong>ButterKnife</strong>, to provide efficiency I have implemented <strong>onCreateView</strong> in BaseFragment where I call <strong>ButterKnife.bind</strong> method, so you have view binding out of the box! <g-emoji alias="smile" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png" ios-version="6.0">üòÑ</g-emoji></p></li>
                    <li><p><strong>getPresenter</strong> ‚Üí simple getter, to make your access to the presenter more cleaner.</p></li>
                    <li><p><strong>onPresenterCreated</strong> ‚Üí in this method you should attach the view to the presenter in order to start working.</p></li>
                </ul>
                <h4>Some notes on ButterKnife</h4>

                <p>The standard <strong>ButterKnife</strong> library is included by default. But there is a missing point, you have to add in your app <strong>build.gradle</strong> file the annotation procesor, if not, <a href="https://github.com/Bind" class="user-mention">@Bind</a> annotations won't work: </p>

                <div class="highlight highlight-source-groovy-gradle mdl-color--grey-50"><pre><span class="pl-en">dependencies</span> {
  annotationProcessor <span class="pl-s"><span class="pl-pds">'</span>com.jakewharton:butterknife-compiler:8.4.0<span class="pl-pds">'</span></span>
}</pre></div>

                <h4>Issue</h4>
                <p>If you found a bug, or you have an answer, or whatever. Please, open an <a href="https://github.com/BlackBoxVision/mvp-helpers/issues">issue</a>. I will do the best to fix it, or help you. </p>
                <h4>Contributing</h4>
                <p>
                    Of course, if you see something that you want to upgrade from this library, or a bug that needs to be solved, <strong>PRs are really welcome</strong>
                </p>
                <h4>Release History</h4>
                <ul>
                    <li><strong>0.1.0</strong></li>
                        <ul>
                            <li><strong>CHANGE</strong>: Folder refactor under UI package</li>
                            <li><strong>CHANGE</strong>: Modified BasePresenter method registerView to attachView in order to get more consistence</li>
                            <li><strong>CHANGE</strong>: Added new runOnBackground version in BaseInteractor that uses a ScheduledExecutorService and also cancel method to stop execution</li>
                            <li><strong>CHANGE</strong>: Added Custom Views to extend BaseRelativeLayout, BaseFrameLayout and BaseLinearLayout</li>
                        </ul>
                    <li><strong>0.0.3</strong>
                        <ul>
                            <li><strong>CHANGE</strong>: Removed ButterKnife annotation processor<br>
                            </li>
                            <li><strong>CHANGE</strong>: Rename mvphelpers library to library</li>
                        </ul>
                    </li>
                    <li><strong>0.0.2</strong>
                        <ul>
                            <li><strong>CHANGE</strong>: Minor updates</li>
                        </ul>
                    </li>
                    <li><strong>0.0.1</strong>
                        <ul>
                            <li>Work in progress</li>
                        </ul>
                    </li>
                </ul>
                <h4>License</h4>
                <p>
                    Distributed under the <strong>MIT license</strong>. See <strong>LICENSE</strong> for more information.
                </p>
            </div>
        </div>
        <footer class="demo-footer mdl-mini-footer">
            <div class="mdl-mini-footer--left-section">
                <ul class="mdl-mini-footer--link-list">
                    <li><a href="#">Made with ‚ù§Ô∏è by BlackBox Vision</a></li>
                </ul>
            </div>
        </footer>
    </main>
</div>
<script defer src="https://code.getmdl.io/1.2.1/material.min.js"/>
</body>
</html>